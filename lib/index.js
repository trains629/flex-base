var v=Object.assign;import c,{useState as B,useEffect as G}from"react";import M from"classnames";function $(e){let{children:t,onClose:o}=e;return c.createElement("div",{className:"modal-header"},c.createElement("h5",{className:"modal-title"},t),c.createElement("button",{type:"button",className:"close",onClick:o},c.createElement("span",null,"×")))}function H({children:e}){return c.createElement("div",{className:"modal-footer"},e)}function j(e){let{title:t="标题",footer:o,children:n,onClose:l,className:a}=e;const[r,s]=B(e.show);G(()=>{s(e.show)});const i=d=>{typeof l=="function"&&l(!1),s(!1)};let m={},f={};return r&&(m.display="block",f.zIndex=1200),c.createElement("div",{className:M("modal","fade",r?"show":""),style:m},c.createElement("div",{className:M("modal-dialog",a),style:f},c.createElement("div",{className:"modal-content"},c.createElement($,{onClose:i},t),c.createElement("div",{className:"modal-body"},n),o||null)),r?c.createElement("div",{key:"show",className:"modal-backdrop fade show",onClick:i}):null)}var A={Modal:j,Footer:H,Header:$};function h(e){return Math.ceil(e*100+.5)/100}function V(e,t){const o=t===t.ownerDocument.body,n=o?{left:0,top:0}:t.getBoundingClientRect(),l=e.clientX+t.scrollLeft-n.left,a=e.clientY+t.scrollTop-n.top;return{x:l,y:a}}function x(e){if(!e)return;let{left:t,top:o,right:n,bottom:l}=e.getBoundingClientRect(),{pageXOffset:a,pageYOffset:r}=window,s=n-t,i=l-o;return{left:h(t+a),top:h(o+r),right:h(n+a),bottom:h(l+r),width:h(s),height:h(i)}}function N(e,t,o){if(!e)return;e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener?e.addEventListener(t,o,!0):e["on"+t]=o}function g(e,t,o){if(!e)return;e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener?e.removeEventListener(t,o,!0):e["on"+t]=null}import w,{useState as X,useEffect as q}from"react";import I from"classnames";function J({children:e,onClose:t,className:o="dropdown-item"}){return w.createElement("a",{className:o,onMouseDown:n=>{t(n)}},e)}function Y(e){let{onClose:t,children:o,className:n="dropdown-menu"}=e,[l,a]=X(e.show||!1);const r=()=>{a(!1),g(document,"mousedown",r),typeof t=="function"&&t()};return q(()=>(e.show&&!l&&(N(document,"mousedown",r),a(e.show)),()=>{g(document,"mousedown",r)}),[e.show]),w.createElement("div",{className:I(n,l?"show":"")},o.map((s,i)=>s!=="-"?w.createElement(J,{key:`dropdown${i}`,onClose:m=>{m.stopPropagation(),r(),typeof s.onClick=="function"&&s.onClick(m)}},s.caption):w.createElement("div",{className:"dropdown-divider",key:`dropdown${i}`})))}function K(e){let{caption:t,children:o=[],className:n="dropdown",onClick:l,disabled:a,style:r={},btnClassName:s="btn"}=e,[i,m]=X(!1);const f=()=>{m(!1)};let d={type:"button",className:I(s,"dropdown-toggle")};return a&&(d.disabled=a),w.createElement("div",{className:I(n,i?"show":""),style:r},w.createElement("button",v(v({},d),{onClick:u=>{if(typeof l!="function")return m(!0);let y=l(u);return(y||"").toString()!=="[object Promise]"?m(!0):y.then(C=>{m(!!(Array.isArray(C)&&C.length))})}}),t),w.createElement(Y,{show:i,onClose:f},o))}var L={Dropdown:K,Menu:Y};import p,{Component as Q,useRef as U}from"react";import _ from"react-dom";function z(e){let{children:t,style:o,onMouseDown:n,className:l,onDeleteItem:a,setValue:r,Item:s}=e;const i=U(null);return p.createElement("li",{className:l,style:o,ref:i},s?p.createElement(s,{setValue:m=>{typeof r=="function"&&r(m)},onMouseDown:m=>{typeof n=="function"&&n(m,x(i.current))},onDeleteItem:()=>{typeof a=="function"&&a()}},t):null)}class D extends Q{constructor(){super(...arguments);this.state={show:!1,x:0,y:0,width:0,height:0,actionMode:""};this.myRef=p.createRef();this.mouseCount=0;this.currentIndex=-1;this.itemSize={width:0,height:0};this.handleDragStart=e=>{if(e.stopPropagation(),e.preventDefault(),typeof e.button=="number"&&e.button!==0)return!1;this.addEvent();let{x:t,y:o}=this.getClentXY(e);this.startXY={x:t,y:o}};this.handleDrag=e=>{if(e.stopPropagation(),this.mouseCount<=1)return this.mouseCount++;let{onExchange:t,children:o}=this.props,{x:n,y:l,width:a,height:r}=this.getClentXY(e),s=this.checkRect({x:n,y:l,width:a,height:r},o);if(typeof s=="number"&&this.currentIndex!==s&&o.length>0){let i=o.splice(this.currentIndex,1);o.splice(s,0,i[0]),typeof t=="function"&&t(o,this.currentIndex,s),this.setItemValue(s,!1)}this.setState({show:!0,x:n,y:l,width:a,height:r})};this.handleDragStop=e=>{e.stopPropagation(),this.removeEvent(),this.setItemValue(),this.startXY=null,this.setState({show:!1,actionMode:""})}}addEvent(){this.mouseCount=0;const e=_.findDOMNode(this);if(!e)return;const{ownerDocument:t}=e;N(t,"mousemove",this.handleDrag),N(t,"mouseup",this.handleDragStop)}removeEvent(){this.mouseCount=0;const e=_.findDOMNode(this);if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:t}=e;g(t,"mousemove",this.handleDrag),g(t,"mouseup",this.handleDragStop)}checkRect(e,t){let{x:o,y:n,width:l,height:a}=e,r=o>=0&&o<=l&&n>=0&&n<=a;if(!r)return;const s=Array.isArray(t)?t.length:0;if(s<=0)return;const i=a/s;if(i>0)return Math.floor(n/i)}getClentXY(e){const{current:t}=this.myRef;let{x:o,y:n}=V(e,t),{width:l,height:a}=x(t);return{x:o,y:n,width:l,height:a}}setItemValue(e=-1,t=0,o=0){if(this.currentIndex=e,typeof t!="number")return;this.itemSize={width:t,height:o}}move(){let{show:e,x:t,y:o}=this.state;if(!e)return null;let{itemSize:n}=this,{Item:l,children:a}=this.props,r=this.startXY;return t=h(t-(r?r.x%n.width:0)),o=h(o-(r?r.y%n.height:0)),p.createElement(z,{className:"flex-sortable-item",Item:l,style:v({transform:`translate(${t}px,${o}px)`},n)},a[this.currentIndex])}render(){let{style:e,onDeleteItem:t,children:o,title:n,extend:l,Item:a,setItemValue:r}=this.props;return p.createElement(p.Fragment,null,n||null,this.move(),p.createElement("ul",{className:"list-group",ref:this.myRef,style:e},Array.isArray(o)?o.map((s,i)=>{let m=i===this.currentIndex,{actionMode:f=""}=this.state,d=`li${i+1}${m?"b":""}${f}`;return m?p.createElement("li",{className:"list-group-item",key:d,style:v({border:"2px dashed #abdfa1"},this.itemSize)}):p.createElement(z,{className:"list-group-item",Item:a,key:d,index:i,setValue:u=>{typeof r=="function"&&r(u,i)},onMouseDown:(u,y)=>{this.handleDragStart(u);let{height:C,width:P}=y;this.setItemValue(i,P,C)},onDeleteItem:()=>{if(this.setItemValue(),i<0||i>=o.length)return;o.splice(i,1),t(o,i),this.setState({show:!1,actionMode:`d${i}`})}},s)}):null),l||null)}}import W from"react";function k({children:e,className:t}){let o=e;return o==null||typeof o=="number"&&o.toString()==="NaN"?null:W.createElement("div",{className:t},o)}import F from"react";import O from"classnames";var T=({children:e,onClick:t,className:o="",linkClass:n=""})=>F.createElement("li",{className:O("nav-item",o)},F.createElement("a",{className:O("nav-link",n),onClick:l=>{typeof t=="function"&&t(l)}},e));import b,{useState as Z}from"react";import S from"classnames";function E(e){let{children:t=[],itemdata:o,className:n="",headerclass:l,onClick:a,index:r=0}=e;const[s,i]=Z(r);let m=t[s]&&t[s].kind?t[s].kind:`tab_${s}`;return b.createElement("div",{className:S(n,"card")},b.createElement("div",{className:S("card-header",l)},b.createElement("ul",{className:"nav nav-tabs card-header-tabs"},Array.isArray(t)?t.map(({caption:f,kind:d},u)=>b.createElement(T,{key:`${d||"li"}_${u}`,onClick:y=>{i(u),typeof a=="function"&&a(y,u)},linkClass:s===u?"active":""},f)):null)),b.createElement("div",{className:"tab-content",key:m},Array.isArray(t)?t.map((f,d)=>{let u=s===d;return typeof o=="function"?b.createElement("div",{key:`tab_${d}`,className:S("tab-pane","fade",{show:u},{active:u})},o(f,d)):null}):null))}const R=E,ee=k,te=D,oe=A,ne=L;export{ee as Caption,ne as Dropdown,oe as Modal,te as Sortable,R as TabCard};
