var g=Object.assign;import h,{useState as H,useEffect as j}from"react";import A from"classnames";function V(e){let{children:t,onClose:o}=e;return h.createElement("header",{className:"modal-card-head"},h.createElement("p",{className:"modal-card-title"},t),h.createElement("button",{className:"delete",onClick:o}))}function q({children:e}){return h.createElement("footer",{className:"modal-card-foot"},e)}function J(e){let{title:t="标题",footer:o,children:n,onClose:r,className:l}=e;const[i,a]=H(e.show);j(()=>{a(e.show)});const s=c=>{typeof r=="function"&&r(!1),a(!1)};let m={},v={};return i&&(m.display="block",v.zIndex=1200),h.createElement("div",{className:A("modal",{"is-active":i}),style:m},i?h.createElement("div",{className:"modal-background",onClick:s}):null,h.createElement("div",{className:A("modal-card",l),style:v},h.createElement(V,{onClose:s},t),h.createElement("section",{className:"modal-card-body"},n),o||null))}var X={Modal:J,Footer:q,Header:V};function p(e){return Math.ceil(e*100+.5)/100}function Y(e,t){const o=t===t.ownerDocument.body,n=o?{left:0,top:0}:t.getBoundingClientRect(),r=e.clientX+t.scrollLeft-n.left,l=e.clientY+t.scrollTop-n.top;return{x:r,y:l}}function x(e){if(!e)return;let{left:t,top:o,right:n,bottom:r}=e.getBoundingClientRect(),{pageXOffset:l,pageYOffset:i}=window,a=n-t,s=r-o;return{left:p(t+l),top:p(o+i),right:p(n+l),bottom:p(r+i),width:p(a),height:p(s)}}function I(e,t,o){if(!e)return;e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener?e.addEventListener(t,o,!0):e["on"+t]=o}function b(e,t,o){if(!e)return;e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener?e.removeEventListener(t,o,!0):e["on"+t]=null}import w,{useState as L,useEffect as K}from"react";import D from"classnames";function Q({children:e,onClose:t,className:o="dropdown-item"}){return w.createElement("a",{className:o,onMouseDown:n=>{t(n)}},e)}function _(e){let{onClose:t,children:o,className:n="dropdown-menu"}=e,[r,l]=L(e.show||!1);const i=()=>{l(!1),b(document,"mousedown",i),typeof t=="function"&&t()};return K(()=>(e.show&&!r&&(I(document,"mousedown",i),l(e.show)),()=>{b(document,"mousedown",i)}),[e.show]),w.createElement("div",{className:D(n,r?"show":"")},o.map((a,s)=>a!=="-"?w.createElement(Q,{key:`dropdown${s}`,onClose:m=>{m.stopPropagation(),i(),typeof a.onClick=="function"&&a.onClick(m)}},a.caption):w.createElement("div",{className:"dropdown-divider",key:`dropdown${s}`})))}function U(e){let{caption:t,children:o=[],className:n="dropdown",onClick:r,disabled:l,style:i={},btnClassName:a="btn"}=e,[s,m]=L(!1);const v=()=>{m(!1)};let c={type:"button",className:D(a,"dropdown-toggle")};return l&&(c.disabled=l),w.createElement("div",{className:D(n,s?"show":""),style:i},w.createElement("button",g(g({},c),{onClick:d=>{if(typeof r!="function")return m(!0);let u=r(d);return(u||"").toString()!=="[object Promise]"?m(!0):u.then(N=>{m(!!(Array.isArray(N)&&N.length))})}}),t),w.createElement(_,{show:s,onClose:v},o))}var z={Dropdown:U,Menu:_};import y,{Component as W,useRef as Z}from"react";import F from"react-dom";function O(e){let{children:t,style:o,onMouseDown:n,className:r,onDeleteItem:l,setValue:i,Item:a}=e;const s=Z(null);return y.createElement("li",{className:r,style:o,ref:s},a?y.createElement(a,{setValue:m=>{typeof i=="function"&&i(m)},onMouseDown:m=>{typeof n=="function"&&n(m,x(s.current))},onDeleteItem:()=>{typeof l=="function"&&l()}},t):null)}class S extends W{constructor(){super(...arguments);this.state={show:!1,x:0,y:0,width:0,height:0,actionMode:""};this.myRef=y.createRef();this.mouseCount=0;this.currentIndex=-1;this.itemSize={width:0,height:0};this.handleDragStart=e=>{if(e.stopPropagation(),e.preventDefault(),typeof e.button=="number"&&e.button!==0)return!1;this.addEvent();let{x:t,y:o}=this.getClentXY(e);this.startXY={x:t,y:o}};this.handleDrag=e=>{if(e.stopPropagation(),this.mouseCount<=1)return this.mouseCount++;let{onExchange:t,children:o}=this.props,{x:n,y:r,width:l,height:i}=this.getClentXY(e),a=this.checkRect({x:n,y:r,width:l,height:i},o);if(typeof a=="number"&&this.currentIndex!==a&&o.length>0){let s=o.splice(this.currentIndex,1);o.splice(a,0,s[0]),typeof t=="function"&&t(o,this.currentIndex,a),this.setItemValue(a,!1)}this.setState({show:!0,x:n,y:r,width:l,height:i})};this.handleDragStop=e=>{e.stopPropagation(),this.removeEvent(),this.setItemValue(),this.startXY=null,this.setState({show:!1,actionMode:""})}}addEvent(){this.mouseCount=0;const e=F.findDOMNode(this);if(!e)return;const{ownerDocument:t}=e;I(t,"mousemove",this.handleDrag),I(t,"mouseup",this.handleDragStop)}removeEvent(){this.mouseCount=0;const e=F.findDOMNode(this);if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:t}=e;b(t,"mousemove",this.handleDrag),b(t,"mouseup",this.handleDragStop)}checkRect(e,t){let{x:o,y:n,width:r,height:l}=e,i=o>=0&&o<=r&&n>=0&&n<=l;if(!i)return;const a=Array.isArray(t)?t.length:0;if(a<=0)return;const s=l/a;if(s>0)return Math.floor(n/s)}getClentXY(e){const{current:t}=this.myRef;let{x:o,y:n}=Y(e,t),{width:r,height:l}=x(t);return{x:o,y:n,width:r,height:l}}setItemValue(e=-1,t=0,o=0){if(this.currentIndex=e,typeof t!="number")return;this.itemSize={width:t,height:o}}move(){let{show:e,x:t,y:o}=this.state;if(!e)return null;let{itemSize:n}=this,{Item:r,children:l}=this.props,i=this.startXY;return t=p(t-(i?i.x%n.width:0)),o=p(o-(i?i.y%n.height:0)),y.createElement(O,{className:"flex-sortable-item",Item:r,style:g({transform:`translate(${t}px,${o}px)`},n)},l[this.currentIndex])}render(){let{style:e,onDeleteItem:t,children:o,title:n,extend:r,Item:l,setItemValue:i}=this.props;return y.createElement(y.Fragment,null,n||null,this.move(),y.createElement("ul",{className:"list-group",ref:this.myRef,style:e},Array.isArray(o)?o.map((a,s)=>{let m=s===this.currentIndex,{actionMode:v=""}=this.state,c=`li${s+1}${m?"b":""}${v}`;return m?y.createElement("li",{className:"list-group-item",key:c,style:g({border:"2px dashed #abdfa1"},this.itemSize)}):y.createElement(O,{className:"list-group-item",Item:l,key:c,index:s,setValue:d=>{typeof i=="function"&&i(d,s)},onMouseDown:(d,u)=>{this.handleDragStart(d);let{height:N,width:G}=u;this.setItemValue(s,G,N)},onDeleteItem:()=>{if(this.setItemValue(),s<0||s>=o.length)return;o.splice(s,1),t(o,s),this.setState({show:!1,actionMode:`d${s}`})}},a)}):null),r||null)}}import R from"react";function k({children:e,className:t}){let o=e;return o==null||typeof o=="number"&&o.toString()==="NaN"?null:R.createElement("div",{className:t},o)}import P from"react";import ee from"classnames";var T=({children:e,onClick:t,className:o="",active:n})=>P.createElement("li",{className:ee(o,{"is-active":n})},P.createElement("a",{onClick:r=>{typeof t=="function"&&t(r)}},e));import f,{useState as te}from"react";import E from"classnames";function M(e){let{children:t=[],itemdata:o,className:n="",headerclass:r,onClick:l,style:i,index:a=0}=e;const[s,m]=te(a);let v=t[s]&&t[s].kind?t[s].kind:`tab_${s}`;return f.createElement("div",{className:E(n,"card"),style:i},f.createElement("div",{className:E("card-header",r)},f.createElement("div",{className:"tabs is-boxed"},f.createElement("ul",null,Array.isArray(t)?t.map(({caption:c,kind:d},u)=>f.createElement(T,{key:`${d||"li"}_${u}`,onClick:N=>{m(u),typeof l=="function"&&l(N,u)},active:s===u},f.createElement("span",{className:"icon is-small"},f.createElement("i",{className:"far fa-file-alt"})),f.createElement("span",null,c))):null))),f.createElement("div",{className:"card-content",key:v},Array.isArray(t)?t.map((c,d)=>{let u=s===d;return typeof o=="function"?f.createElement("div",{key:`tab_${d}`,className:E("content",{"is-hidden":!u})},o(c,d)):null}):null))}import C from"react";import B from"classnames";function $({className:e,caption:t,children:o,footer:n,isCenter:r=!1}){return C.createElement("div",{className:B(e,"card")},t&&C.createElement("div",{className:"card-header"},C.createElement("p",{className:B("card-header-title",{"is-centered":r})},t)),C.createElement("div",{className:"card-content"},C.createElement("div",{className:"content"},o)),n&&C.createElement("div",{className:"card-footer"},n))}export{k as Caption,$ as Card,z as Dropdown,X as Modal,S as Sortable,M as TabCard};
